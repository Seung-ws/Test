USE EUNDB;

CREATE TABLE BOARD_CATEGORY(
	CATEGORY_ID INTEGER,
    CATEGORY_NAME VARCHAR(100) NOT NULL,
    CATEGORY_CLASS1 INTEGER(4) NULL,
    CATEGORY_CLASS2 INTEGER(4) NULL,
    CATEGORY_DESCRIPTION VARCHAR(100) NULL,
    CATEGORY_ORDER INTEGER(4) NULL,
    CONSTRAINT PK_BOARD_CATEGORY_CATEGORY_ID PRIMARY KEY(CATEGORY_ID),
    CONSTRAINT UK_BOARD_CATEGORY_CATEGORY_NAME UNIQUE (CATEGORY_NAME)
);
CREATE UNIQUE INDEX INDEX_BOARD_CATEGORY ON BOARD_CATEGORY(CATEGORY_ID);

CREATE TABLE BOARD
(
	BOARD_ID INTEGER,
    CATEGORY_ID INTEGER,
    BOARD_WRITER VARCHAR(20) NOT NULL,
    BOARD_WRITER_ID VARCHAR(100),
    BOARD_PASSWORD VARCHAR(20) NOT NULL,
    BOARD_TITLE VARCHAR(500) NOT NULL,
    BOARD_CONTENT BLOB,
    BOARD_WRITEDATE DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL,
    BOARD_MASTER_ID INTEGER,
    REPLY_BOARD_STARTBOARD INTEGER,
    REPLY_BOARD_NUMBER INTEGER,
    REPLY_BOARD_STEP INTEGER,
    READ_COUNT INTEGER DEFAULT 0,
    CONSTRAINT PK_BOARD_BOARD_ID PRIMARY KEY(BOARD_ID),
    CONSTRAINT FK_BOARD_CATEGORY_ID
		FOREIGN KEY(CATEGORY_ID) REFERENCES BOARD_CATEGORY(CATEGORY_ID) ON DELETE CASCADE    
);
CREATE UNIQUE INDEX INDEX_BOARD ON BOARD(BOARD_ID);

CREATE TABLE BOARD_UPLOAD_FILE
( 
	FILE_ID INTEGER,
    BOARD_ID INTEGER NULL,
    FILE_NAME VARCHAR(235) NULL,
    FILE_SIZE VARCHAR(45) NULL,
    FILE_CONTENT_TYPE VARCHAR(500) NULL,
    FILE_DATA BLOB NULL,
    CONSTRAINT PK_BOARD_FILE_ID PRIMARY KEY(FILE_ID),
    CONSTRAINT FK_BOARD_BOARD_ID
		FOREIGN KEY (BOARD_ID) REFERENCES BOARD(BOARD_ID) ON DELETE CASCADE
);
CREATE UNIQUE INDEX INDEX_BOARD_UPLOAD_FILE ON BOARD_UPLOAD_FILE(FILE_ID);